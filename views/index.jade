extends layout

block content
  //- Intro Animation
  div.intro_animation_screen
    div.introAnimationStage
      div.newIntroShot(id='shot1')
        div.staticRectangles(id='staticArticle')
        div(id='movingRect')
          img(id='pointer' src='images/pointer.png')
        div.staticRectangles(id='staticArticle2')
        .intro_bucket
          div(id="introBucketStage")
        //- .intro_shadow_bucket
        //-   div(id="introShadowStage")
          //- img(id='heart' src='images/heart.svg')
      div.newIntroShot(id='shot2')
        div.closeIntroButton Enter
  h1.test= title
  p Welcome to #{title}
  p.search Search: 
    input(ng-model="search")
  //- Bucket for reading articles
  .bucket_container(ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="onLeave()") 
    .bucket
      h4.bucket_name BUCKET
      .bucket_item_holder 
        strong Drag to add article
  //- Animated Bucket
  .animation_container
    div(id="stage")
  .shadow_container
    div(id="shadowStage")
    img(id='heart' src='images/heart.svg')
  //- Articles list
  .articles
    div.article(ng-repeat="article in articles | removeTopStories | filter:search"  ng-dblclick="addToBucket(article, $event)" ng-class="{article_in_bucket: inBucket(article)}" draggable="true" ondragstart="onDragStart(event)")   
      div(id='{{article.id}}' data-paragraph='{{article.text.paragraph}}' data-article-link="{{article.link[0].$text}}")
        //- find primary image and show those images.  only show src if it exists?  what is the main error?
        //- {{article.image[0].src}}
        img.main_image(src="{{article | getMainImage}}" data-thumb="{{article | getThumbnail }}") 
        .article_content
          .title 
            b {{article.title.$text}}
          br
          div.text(ng-bind-html="article.teaser.$text")
    .loading(ng-show="loading")

  
  //- Reader

  div.article_container
    button.close.glyphicon.glyphicon-remove
    #reader
      div.verticalLine
        span#front {{front}}
        span#center {{center}}
        span#back {{back}}
    br
    button#restart(onclick='restart()') Restart
    button#rewind(onclick='rewind()') Rewind
    button#submit(onclick='read()') Play
    h2.glyphicon.glyphicon-play(id='submit', onclick='read()')
    button#forward(onclick='forward()') FastForward
    
    select#wpm
      option(value='100') 100 WPM
      option(value='200') 200 WPM
      option(value='300') 300 WPM
      option(value='400') 400 WPM
      option(value='500') 500 WPM
      option(value='600') 600 WPM
      option(value='700') 700 WPM
      option(value='800') 800 WPM
      option(value='900') 900 WPM

    a.link_to_article(href="http://www.npr.org" target="_blank") Read the full article
